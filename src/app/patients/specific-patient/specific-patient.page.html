<ion-header>
  <ion-toolbar color=primary>
    <ion-buttons slot="start">
      <ion-back-button text=""></ion-back-button>
    </ion-buttons>
    <ion-title>Agilmente - Detalle de Paciente</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-row>
    <ion-col>
      <div class="ion-padding-top ion-margin-top">
        <ion-row>
          <ion-col size=3>
            <ion-title>
              Datos Personales
            </ion-title>
          </ion-col>
          <ion-col size=9>
            <ion-button 
              style="float: right;"
              color="danger"  
              fill="clear"
              (click)="this.deletePatient()">
              <ion-icon name="trash-outline"></ion-icon>
              <p class="ion-margin">Eliminar</p>
            </ion-button>
            <ion-button 
              style="float: right;"
              fill="clear" 
              [routerLink]="['../edit-patient',id]">
              <ion-icon name="pencil-outline" item-right></ion-icon>
              <p class="ion-margin">Editar</p>
            </ion-button>
            <div *ngIf="this.patient?.loginCode && this.patient?.loginCode.length==6" style="float: right; margin-right: 5%; margin-top: -0.5%;">
              <h5>
                C칩digo de Ingreso: {{this.patient.loginCode}} 
              </h5>
            </div>
            <div *ngIf="this.patient?.loginCode.length!=6 && this.patient?.logged" style="float: right; margin-right: 5%;">
              <h5 style="float: right;margin-right: 5%;margin-top: -0.5%;">
                Paciente Vinculado
              </h5>
              <ion-button 
                style="float: right;"
                (click)="this.unlinkPatient()">
                <ion-icon name="log-out-outline"></ion-icon>
                <p class="ion-padding">Desvincular</p>
              </ion-button>
            </div>
            <div *ngIf="this.patient?.loginCode.length!=6 && !this.patient?.logged" style="float: right; margin-right: 5%;">
              <h5 style="float: right;margin-right: 5%;margin-top: -0.5%;">
                Paciente Desvinculado
              </h5>
              <ion-button 
                style="float: right;"
                (click)="this.resetCode()">
                <ion-icon name="log-out-outline"></ion-icon>
                <p class="ion-padding">Generar C칩digo</p>
              </ion-button>
            </div>
          </ion-col>
        </ion-row>
      </div>
    
      <div id="container">
        <form [formGroup]="myForm">
          <ion-row>
            <ion-col size=6>
              <ion-item id="rounded">
                <ion-label position="stacked" fixed="" color="primary">Nombre</ion-label>
                <ion-input [disabled]="true" readonly formControlName="firstName" type="text"></ion-input>
              </ion-item>
            </ion-col>  
            <ion-col size=6>
              <ion-item id="rounded">
                <ion-label position="stacked" color="primary">Apellido</ion-label>
                <ion-input [disabled]="true" readonly formControlName="lastName" type="text"></ion-input>
              </ion-item>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col size=6>
              <ion-item id="rounded" button>
                <ion-label position="stacked" color="primary">Fecha de nacimiento</ion-label>
                <ion-input [disabled]="true" readonly formControlName="birthDate"></ion-input>
                <ion-icon name="calendar-outline" slot="end" style="margin-top: 16px;"></ion-icon>
              </ion-item>
            </ion-col>
            <ion-col>
              <ion-item id="rounded">
                <ion-label 
                  position="stacked" 
                  color="primary">
                  Localidad
                </ion-label>
                <ion-input
                  formControlName="city" 
                  readonly 
                  [disabled]="true"
                  type="text"></ion-input>
              </ion-item>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col>
              <ion-item id="rounded">
                <ion-label 
                  position="stacked" 
                  color="primary">
                  Descripci칩n
                </ion-label>
                <ion-textarea 
                  [disabled]="true"
                  rows="6" 
                  formControlName="description" 
                  type="text">
                </ion-textarea>
              </ion-item>
            </ion-col>
          </ion-row>
          <br>
          <br>
        </form>
        <!-- <ion-row>
          <ion-col size=5>
            <ion-grid class="grid-full">
              <ion-row>
                <ion-col style="box-shadow: 0px 3px 3px 0px grey;margin: 3px"><b>Partida</b></ion-col>
                <ion-col style="box-shadow: 0px 3px 3px 0px grey;margin: 3px"><b>Aciertos</b></ion-col>
                <ion-col style="box-shadow: 0px 3px 3px 0px grey;margin: 3px"><b>Errores</b></ion-col>
                <ion-col style="box-shadow: 0px 3px 3px 0px grey;margin: 3px"><b>Tiempo Total</b></ion-col>
              </ion-row>
              <ion-row *ngFor="let result of results; index as i">
                <ion-col style="box-shadow: 0px 3px 3px 0px grey;margin: 3px">{{ i + 1 }}</ion-col>
                <ion-col style="box-shadow: 0px 3px 3px 0px grey;margin: 3px">{{result.successes}}</ion-col>
                <ion-col style="box-shadow: 0px 3px 3px 0px grey;margin: 3px">{{result.mistakes}}</ion-col>
                <ion-col style="box-shadow: 0px 3px 3px 0px grey;margin: 3px">{{result.totalTime}}</ion-col>
              </ion-row>
            </ion-grid>
          </ion-col>
          <ion-col size=7>
            <div>
              <ion-card>
                <ion-card-header>
                  Desempe침o General
                </ion-card-header>
                <ion-card-content>
                  <canvas #lineCumulativeCanvas style="position: relative;"></canvas>
                </ion-card-content>
              </ion-card>
            </div>
          </ion-col>
        </ion-row> -->
        <app-card-game-result [results]="this.results.hayUnoRepetido" *ngIf="this.results"></app-card-game-result>
      </div>
    </ion-col>

  </ion-row>
  
</ion-content>
